{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\celio\\\\OneDrive\\\\Documents\\\\Programacao\\\\React\\\\countries-api-rest\\\\src\\\\components\\\\DetailPage\\\\DetailPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useReducer } from 'react';\nimport { Wrapper, Back, Container, Image, InfoContainer, Title, InfoColumns, Column, Info, BordersContainer, Button, BorderLabel, Span } from './styles';\nimport { Link } from 'react-router-dom';\nimport { BsArrowLeft } from 'react-icons/bs';\nimport { SyncLoader } from 'react-spinners';\nimport { useCountriesContext } from '../ContextCountries/context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction DetailPage({\n  match,\n  theme\n}) {\n  _s();\n\n  const {\n    countries,\n    setCountries\n  } = useCountriesContext();\n  const [country, setCountry] = useState({});\n  const [loading, setLoading] = useState(true);\n  const initialState = {\n    country: [],\n    nativeName: [],\n    languagesObj: {},\n    languagesList: [],\n    borders: [],\n    countriesId: [],\n    borderCountries: []\n  };\n\n  function reducer(state, action) {\n    switch (action.type) {\n      case 'country':\n        return { ...state,\n          country: action.payload\n        };\n\n      case 'native':\n        return { ...state,\n          nativeName: action.payload\n        };\n\n      case 'langobject':\n        return { ...state,\n          languagesObj: action.payload\n        };\n\n      case 'borders':\n        return { ...state,\n          borders: action.payload\n        };\n\n      case 'IDs':\n        return { ...state,\n          countriesId: action.payload\n        };\n\n      case 'bordersCountries':\n        return { ...state,\n          borderCountries: action.payload\n        };\n\n      case 'langList':\n        return { ...state,\n          languagesList: action.payload\n        };\n\n      default:\n        return state;\n    }\n  }\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    if (!countries.length > 0) {\n      fetch('https://restcountries.com/v3.1/all').then(res => res.json()).then(data => setCountries(data));\n    }\n  }, [setCountries, countries.length]);\n  useEffect(() => {\n    fetch('https://restcountries.com/v3.1/alpha/' + match.params.id).then(res => res.json()).then(data => {\n      dispatch({\n        type: 'country',\n        payload: data[0]\n      });\n      dispatch({\n        type: 'native',\n        payload: data[0].name.nativeName\n      });\n      dispatch({\n        type: 'langobject',\n        payload: data[0].languages\n      });\n      dispatch({\n        type: 'borders',\n        payload: data[0].borders\n      });\n      setCountry(data[0]);\n      setLoading(false);\n    });\n  }, [match.params.id]); //Converts the language objects into an array\n\n  useEffect(() => {\n    let list = [];\n\n    for (let lang in state.languagesObj) {\n      list.push(state.languagesObj[lang]);\n    }\n\n    dispatch({\n      type: 'langList',\n      payload: list\n    });\n  }, [state.languagesObj]); //Create a array of obj with id as country cca3 and name as country name\n\n  useEffect(() => {\n    let idList = [];\n\n    for (let c in countries) {\n      idList.push({\n        name: countries[c].name.common,\n        id: countries[c].cca3\n      });\n    }\n\n    dispatch({\n      type: 'IDs',\n      payload: idList\n    });\n  }, [countries]); //Compares the obj array with the borders arrays to match the border and cca3 parameters\n\n  useEffect(() => {\n    if (country.borders) {\n      let filter = state.countriesId.filter(item => country.borders.includes(item.id));\n      dispatch({\n        type: 'bordersCountries',\n        payload: filter\n      });\n    }\n  }, [state.borders, state.countriesId]);\n\n  const renderCapitals = () => {\n    if (country.capital) {\n      return country.capital.map((cap, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", index !== country.capital.length - 1 ? cap + ',' : cap, \" \"]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this));\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No capital\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 20\n      }, this);\n    }\n  };\n\n  const renderlanguages = () => {\n    const keys = Object.keys(country.languages);\n\n    if (country.languages) {\n      return keys.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: index !== keys.length - 1 ? country.languages[item] + ',' : country.languages[item]\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this));\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No languages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 20\n      }, this);\n    }\n  };\n\n  const renderBorders = () => {\n    if (state.borderCountries.length > 0) {\n      return state.borderCountries.map((item, index) => /*#__PURE__*/_jsxDEV(Link, {\n        to: '/details/' + item.id,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 63\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this));\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No borders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 20\n      }, this);\n    }\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '40vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(SyncLoader, {\n        size: 12,\n        color: theme === 'dark' ? '#fff' : '#000',\n        loading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      style: {\n        textDecoration: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Back, {\n        children: [/*#__PURE__*/_jsxDEV(BsArrowLeft, {\n          color: theme === 'dark' ? '#fff' : '#000',\n          size: 22\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 23\n        }, this), \"Back\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Image, {\n        src: state.country.flags.svg,\n        alt: state.country.name.common\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InfoContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          children: state.country.name.common\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InfoColumns, {\n          children: [/*#__PURE__*/_jsxDEV(Column, {\n            children: [/*#__PURE__*/_jsxDEV(Info, {\n              children: [/*#__PURE__*/_jsxDEV(Span, {\n                children: \"Native Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 35\n              }, this), state.country.name.nativeName ? Object.values(state.nativeName)[0].common : 'No native name']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Info, {\n              children: [/*#__PURE__*/_jsxDEV(Span, {\n                children: \"Population:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 35\n              }, this), state.country.population.toLocaleString('pt-br')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Info, {\n              children: [/*#__PURE__*/_jsxDEV(Span, {\n                children: \"Region:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 35\n              }, this), state.country.region]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Info, {\n              children: [/*#__PURE__*/_jsxDEV(Span, {\n                children: \"Sub Region:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 35\n              }, this), state.country.subregion ? state.country.subregion : 'No subregions']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Info, {\n              children: [/*#__PURE__*/_jsxDEV(Span, {\n                children: \"Capital:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 35\n              }, this), renderCapitals()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            children: [/*#__PURE__*/_jsxDEV(Info, {\n              children: [/*#__PURE__*/_jsxDEV(Span, {\n                children: \"Top Level Domain:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 35\n              }, this), state.country.tld]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Info, {\n              children: [/*#__PURE__*/_jsxDEV(Span, {\n                children: \"Currencies:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 35\n              }, this), state.country.currencies ? Object.values(state.country.currencies)[0].name : 'No currencies']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Info, {\n              children: [/*#__PURE__*/_jsxDEV(Span, {\n                children: \"Languages:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 35\n              }, this), renderlanguages()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(BordersContainer, {\n          children: [/*#__PURE__*/_jsxDEV(BorderLabel, {\n            children: /*#__PURE__*/_jsxDEV(Span, {\n              children: \"Border Countries:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 38\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this), renderBorders()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 9\n  }, this);\n}\n\n_s(DetailPage, \"V65tsDIoTGaHFTvaWgD+yFkp+cg=\", false, function () {\n  return [useCountriesContext];\n});\n\n_c = DetailPage;\nexport default DetailPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"DetailPage\");","map":{"version":3,"sources":["C:/Users/celio/OneDrive/Documents/Programacao/React/countries-api-rest/src/components/DetailPage/DetailPage.js"],"names":["React","useState","useEffect","useReducer","Wrapper","Back","Container","Image","InfoContainer","Title","InfoColumns","Column","Info","BordersContainer","Button","BorderLabel","Span","Link","BsArrowLeft","SyncLoader","useCountriesContext","DetailPage","match","theme","countries","setCountries","country","setCountry","loading","setLoading","initialState","nativeName","languagesObj","languagesList","borders","countriesId","borderCountries","reducer","state","action","type","payload","dispatch","length","fetch","then","res","json","data","params","id","name","languages","list","lang","push","idList","c","common","cca3","filter","item","includes","renderCapitals","capital","map","cap","index","renderlanguages","keys","Object","renderBorders","display","flexDirection","alignItems","justifyContent","height","textDecoration","flags","svg","values","population","toLocaleString","region","subregion","tld","currencies"],"mappings":"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","sourcesContent":["import React, {useState,useEffect,useReducer} from 'react'\r\nimport { Wrapper,Back,Container ,Image, InfoContainer, Title, InfoColumns, Column,Info,BordersContainer, Button, BorderLabel, Span,} from './styles'\r\n\r\nimport { Link} from 'react-router-dom'\r\nimport {BsArrowLeft} from 'react-icons/bs'\r\nimport {SyncLoader} from 'react-spinners'\r\nimport { useCountriesContext } from '../ContextCountries/context'\r\n\r\nfunction DetailPage({match,theme}) {\r\n    \r\n    const {countries,setCountries} = useCountriesContext()\r\n    const [country, setCountry] = useState({})\r\n    const [loading,setLoading] = useState(true)\r\n\r\n    const initialState = {\r\n        country: [],\r\n        nativeName: [],\r\n        languagesObj:{},\r\n        languagesList : [],\r\n        borders: [],\r\n        countriesId: [],\r\n        borderCountries: []\r\n    }\r\n\r\n    function reducer(state,action){\r\n        switch(action.type){\r\n            case 'country':\r\n                return { ...state,country: action.payload};\r\n            case 'native':\r\n                return {...state, nativeName : action.payload};\r\n            case 'langobject':\r\n                return {...state, languagesObj: action.payload};\r\n            case 'borders': \r\n                return{...state, borders: action.payload};    \r\n            case 'IDs': \r\n                return {...state, countriesId: action.payload};\r\n            case 'bordersCountries':\r\n                return {...state, borderCountries: action.payload};\r\n            case 'langList' :\r\n                return {...state, languagesList: action.payload}\r\n            default: return  state\r\n                \r\n        }\r\n    }\r\n\r\n    const [state,dispatch] = useReducer(reducer,initialState)\r\n\r\n    useEffect(() => {\r\n        \r\n        if(!countries.length > 0){\r\n        fetch('https://restcountries.com/v3.1/all')\r\n        .then(res => res.json())\r\n        .then(data => setCountries(data))\r\n        \r\n         }\r\n        \r\n    }, [setCountries,countries.length])\r\n    \r\n    useEffect(() =>{\r\n        fetch('https://restcountries.com/v3.1/alpha/' + match.params.id )\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            dispatch({type:'country',payload: data[0]})\r\n            dispatch({type:'native', payload: data[0].name.nativeName})\r\n            dispatch({type: 'langobject', payload: data[0].languages})\r\n            dispatch({type:'borders', payload: data[0].borders})\r\n            setCountry(data[0])\r\n            setLoading(false)\r\n        })\r\n\r\n    }, [match.params.id])\r\n\r\n    //Converts the language objects into an array\r\n    useEffect(() =>{\r\n        \r\n        let list = []\r\n        for(let lang in state.languagesObj){\r\n            list.push(state.languagesObj[lang])\r\n        }\r\n        dispatch({type :'langList', payload : list})\r\n    \r\n    },[state.languagesObj])\r\n    \r\n    //Create a array of obj with id as country cca3 and name as country name\r\n\r\n    useEffect(() =>{\r\n        let idList = []\r\n        for(let c in countries){\r\n            idList.push({\r\n                name:countries[c].name.common,\r\n                id: countries[c].cca3\r\n                })\r\n        }\r\n        dispatch({type: 'IDs', payload: idList})\r\n    },[countries])\r\n\r\n\r\n    //Compares the obj array with the borders arrays to match the border and cca3 parameters\r\n    useEffect(()=>{\r\n        if(country.borders){\r\n        let filter = state.countriesId.filter(item => country.borders.includes(item.id))\r\n        dispatch({type :'bordersCountries',payload: filter})\r\n    \r\n        }\r\n    },[state.borders,state.countriesId])\r\n\r\n    const renderCapitals = () =>{\r\n        \r\n        if(country.capital){\r\n        return  country.capital.map((cap,index) =>(\r\n            <div key = {index}> {index !== country.capital.length - 1 ? cap + ',' : cap} </div>\r\n            ))}\r\n        else{\r\n            return <div>No capital</div>\r\n        }\r\n    }\r\n\r\n    const renderlanguages = () =>{\r\n        const keys = Object.keys(country.languages)\r\n        if(country.languages){\r\n         return keys.map((item,index) =>(\r\n            <div key = {index}>\r\n                {index !== keys.length -1 ? country.languages[item] + ',' : country.languages[item]}\r\n            </div>))}  \r\n        else{\r\n            return <div>No languages</div>\r\n        }\r\n    }\r\n    \r\n    const renderBorders = () =>{\r\n        if(state.borderCountries.length > 0){\r\n            return state.borderCountries.map((item,index) => (\r\n            <Link to = {'/details/' + item.id} key = {index} ><Button>{item.name}</Button></Link>))\r\n        }else{\r\n            return <div>No borders</div>\r\n        }\r\n    }\r\n\r\n    if(loading){\r\n        return (\r\n        <div style = {{display:'flex', flexDirection: 'column', alignItems:'center' ,justifyContent:'center',height:'40vh'}}>\r\n            <SyncLoader  size = {12} color = {theme === 'dark' ? '#fff' : '#000'} loading = {loading}/>\r\n        </div>)\r\n    }\r\n    return (    \r\n        <Wrapper className = 'container'>\r\n            <Link to ='/' style={{ textDecoration: 'none' }}>\r\n                <Back><BsArrowLeft color = {theme ==='dark' ? '#fff' : '#000'} size = {22}/>Back</Back>\r\n            </Link>\r\n            <Container >\r\n                <Image src = {state.country.flags.svg} alt = {state.country.name.common}/>\r\n                <InfoContainer>\r\n                    <Title>{state.country.name.common}</Title>\r\n                    <InfoColumns>\r\n                        <Column>\r\n                            <Info><Span>Native Name:</Span>\r\n                                { state.country.name.nativeName ?   Object.values(state.nativeName)[0].common : 'No native name'}\r\n                             </Info>\r\n                            <Info><Span>Population:</Span>\r\n                                {state.country.population.toLocaleString('pt-br')}\r\n                            </Info>\r\n                            <Info><Span>Region:</Span>\r\n                                {state.country.region}\r\n                            </Info>\r\n                            <Info><Span>Sub Region:</Span>\r\n                                {state.country.subregion ? state.country.subregion : 'No subregions'}\r\n                            </Info>\r\n                            <Info><Span>Capital:</Span> \r\n                                {renderCapitals()}\r\n                            </Info>\r\n                        </Column>\r\n                        <Column>\r\n                            <Info><Span>Top Level Domain:</Span>\r\n                                {state.country.tld}\r\n                            </Info>\r\n                            <Info><Span>Currencies:</Span>\r\n                                {state.country.currencies ? Object.values(state.country.currencies)[0].name : 'No currencies'}\r\n                             </Info>\r\n                            <Info><Span>Languages:</Span> \r\n                                {renderlanguages()}\r\n                            </Info>\r\n                        </Column>\r\n                    </InfoColumns>\r\n                    <BordersContainer>\r\n                        <BorderLabel><Span>Border Countries:</Span></BorderLabel>\r\n                        {renderBorders()}\r\n                    </BordersContainer>\r\n                </InfoContainer>\r\n            </Container>\r\n        </Wrapper>\r\n    )\r\n}\r\n\r\nexport default DetailPage\r\n"]},"metadata":{},"sourceType":"module"}